"use strict";(self.webpackChunkreact_homework_template=self.webpackChunkreact_homework_template||[]).push([[792],{6792:function(e,t,r){r.r(t),r.d(t,{default:function(){return j}});var n=r(9142);function a(e,t,r){return(t=(0,n.Z)(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function i(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function c(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?i(Object(r),!0).forEach((function(t){a(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):i(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var o,s=r(5861),u=r(9439),p=r(4687),l=r.n(p),h=r(2791),d=r(1087),f=r(7689),v=r(330),g=r(168),m=r(7402).Z.div(o||(o=(0,g.Z)(["\n  display: flex;\n  gap: 32px;\n"]))),_=r(184),b=function(e){var t=e.state;console.log(t);var r=t.vote_average,n=t.overview,a=t.title,i=t.genres,c=t.poster_path;return(0,_.jsxs)(m,{children:[(0,_.jsx)("img",{src:c,alt:a}),(0,_.jsxs)("div",{children:[(0,_.jsx)("h2",{children:a}),(0,_.jsxs)("p",{children:["User score: ",Math.round(10*r),"%"]}),(0,_.jsx)("h3",{children:"Overview"}),(0,_.jsx)("p",{children:n}),(0,_.jsx)("h3",{children:"Genres"}),(0,_.jsx)("p",{children:i})]})]})},x=r(5305),j=function(){var e,t,r=(0,h.useState)({}),n=(0,u.Z)(r,2),a=n[0],i=n[1],o=(0,f.UO)().movieId,p=(0,f.TH)(),g=(0,h.useRef)(null!==(e=null===(t=p.state)||void 0===t?void 0:t.from)&&void 0!==e?e:"/").current;return(0,h.useEffect)((function(){var e=new AbortController;return function(){var t=(0,s.Z)(l().mark((function t(){var r;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,(0,v.Ny)(o,e);case 3:r=t.sent,i(c({},r)),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(){return t.apply(this,arguments)}}()(),function(){e.abort()}}),[o]),(0,_.jsxs)("div",{children:[(0,_.jsx)(d.rU,{to:g,children:"Back to products"}),0!==Object.keys(a).length?(0,_.jsx)(b,{state:a}):null,(0,_.jsxs)("ul",{children:[(0,_.jsx)("li",{children:(0,_.jsx)(d.rU,{to:"cast",children:"CAST"})}),(0,_.jsx)("li",{children:(0,_.jsx)(d.rU,{to:"reviews",children:"REVIEWS"})}),(0,_.jsx)(h.Suspense,{fallback:(0,_.jsx)(x.Z,{}),children:(0,_.jsx)(f.j3,{})})]})]})}},330:function(e,t,r){r.d(t,{Ai:function(){return u},Bt:function(){return d},Ny:function(){return v},Tg:function(){return o},xc:function(){return l}});var n=r(5861),a=r(4687),i=r.n(a),c=r(1243);function o(e){return s.apply(this,arguments)}function s(){return(s=(0,n.Z)(i().mark((function e(t){var r;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("https://api.themoviedb.org/3/trending/movie/day?api_key=a89ed47e53c22ac07455246c7a19999d",{signal:t.signal});case 2:return r=e.sent,e.abrupt("return",r.data.results.map((function(e){var t=e.id,r=e.original_title,n=e.vote_average,a=e.poster_path,i=e.title;return{id:t,original_title:r,vote_average:n,poster_path:a?"https://image.tmdb.org/t/p/w220_and_h330_face".concat(a):"https://via.placeholder.com/220x330",title:i}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(e,t){return p.apply(this,arguments)}function p(){return(p=(0,n.Z)(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("https://api.themoviedb.org/3/search/movie?api_key=a89ed47e53c22ac07455246c7a19999d&query=".concat(t),{signal:r.signal});case 2:return n=e.sent,e.abrupt("return",n.data.results.map((function(e){var t=e.id,r=e.original_title,n=e.vote_average,a=e.poster_path,i=e.title;return{id:t,original_title:r,vote_average:n,poster_path:a?"https://image.tmdb.org/t/p/w220_and_h330_face".concat(a):"https://via.placeholder.com/220x330",title:i}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function l(e,t){return h.apply(this,arguments)}function h(){return(h=(0,n.Z)(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("https://api.themoviedb.org/3/movie/".concat(t,"/credits?api_key=a89ed47e53c22ac07455246c7a19999d&language=en-US"),{signal:r.signal});case 2:return n=e.sent,e.abrupt("return",n.data.cast.map((function(e){var t=e.profile_path,r=e.name,n=e.id;return{profile_path:t?"https://image.tmdb.org/t/p/w138_and_h175_face".concat(t):"https://via.placeholder.com/138x175",name:r,id:n}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function d(e,t){return f.apply(this,arguments)}function f(){return(f=(0,n.Z)(i().mark((function e(t,r){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c.Z.get("https://api.themoviedb.org/3/movie/".concat(t,"/reviews?api_key=a89ed47e53c22ac07455246c7a19999d&language=en-US&page=1"),{signal:r.signal});case 2:return n=e.sent,e.abrupt("return",n.data.results.map((function(e){return{author:e.author,content:e.content,id:e.id,url:e.url}})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e,t){return g.apply(this,arguments)}function g(){return(g=(0,n.Z)(i().mark((function e(t,r){var n,a,o,s,u,p,l,h;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return h=function(e){return e.reduce((function(e,t){return e+t.name}),"").split(/(?=[A-Z])/).join(", ")},e.next=3,c.Z.get("https://api.themoviedb.org/3/movie/".concat(t,"?api_key=a89ed47e53c22ac07455246c7a19999d&language=en-US"),{signal:r.signal});case 3:return n=e.sent,a=n.data,o=a.vote_average,s=a.overview,u=a.title,p=a.genres,l=a.poster_path,e.abrupt("return",{vote_average:o,overview:s,title:u,genres:h(p),poster_path:l?"https://image.tmdb.org/t/p/w300_and_h450_bestv2".concat(l):"https://via.placeholder.com/300x450"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}}}]);
//# sourceMappingURL=792.e29abcc0.chunk.js.map